export default function buildMatchFn(args){return function(dirtyString,dirtyOptions){var string=dirtyString+"",options=dirtyOptions||{},width=options.width,matchPattern=width&&args.matchPatterns[width]||args.matchPatterns[args.defaultMatchWidth],matchResult=string.match(matchPattern);if(!matchResult){return null}var matchedString=matchResult[0],parsePatterns=width&&args.parsePatterns[width]||args.parsePatterns[args.defaultParseWidth],value;if("[object Array]"===Object.prototype.toString.call(parsePatterns)){value=parsePatterns.findIndex(function(pattern){return pattern.test(string)})}else{value=findKey(parsePatterns,function(pattern){return pattern.test(string)})}value=args.valueCallback?args.valueCallback(value):value;value=options.valueCallback?options.valueCallback(value):value;return{value:value,rest:string.slice(matchedString.length)}}}function findKey(object,predicate){for(var key in object){if(object.hasOwnProperty(key)&&predicate(object[key])){return key}}}